import"./main-fbfed023.js";import"./hamburger-5bbfc2df.js";import{A as q}from"./constants-88326297.js";import{g as x}from"./headers-246ce9a4.js";async function k(t){try{const e=await fetch(`${q}/listings`,{method:"POST",headers:x(),body:JSON.stringify(t)});if(e.ok)return await e.json();throw new Error}catch(e){console.error("Error:",e)}}const T=document.querySelector(".create-form"),b=document.getElementById("tags"),h=document.querySelector(".tags-container"),L=[{background:"#23A79A",font:"#000000"},{background:"#FF91E7",font:"#000000"},{background:"#91A8EC",font:"#000000"}];let y=0;const I=()=>{const t=L[y];return y=(y+1)%L.length,t},w=t=>{t.target.classList.contains("tag-close")&&t.target.parentElement.remove()},A=(t,e)=>{const n=document.createElement("span");n.classList.add("tag"),n.style.backgroundColor=e.background,n.style.color=e.font;const a=document.createElement("span");a.classList.add("tag-text"),a.textContent=t;const u=document.createElement("span");return u.classList.add("tag-close"),u.textContent=" ðŸ—™ ",n.appendChild(a),n.appendChild(u),n},D=t=>{if(t.keyCode===13){t.preventDefault();const e=t.target.value,n=I(),a=A(e,n);h.appendChild(a),b.value=""}};T.addEventListener("submit",t=>{t.preventDefault()});b.addEventListener("keyup",D);window.onload=()=>{h.addEventListener("click",w)};async function B(){const t=document.querySelector(".create-form");t&&t.addEventListener("submit",async e=>{e.preventDefault();const n=e.target,a=new FormData(n),u=a.get("date"),o=a.get("time"),s=`${u}T${o}`;document.getElementById("tags");const l=document.querySelector(".tags-container"),d=document.querySelector(".create-btn"),p=document.querySelector(".create-h1"),r={title:a.get("title"),description:a.get("description"),endsAt:s},m=Array.from(l.children).filter(c=>c.classList.contains("tag")).map(c=>c.querySelector(".tag-text").textContent.trim()).filter(c=>c!=="");m.length>0&&(r.tags=m);const f=document.querySelector(".upload-images-form");if(f){const c=new FormData(f),g=Array.from(c.getAll("media")).filter(C=>C.trim()!=="");g.length>0&&(r.media=g)}try{d.innerHTML='<span class="loader"></span>',await k(r),d.textContent="Success!",p.textContent="Listing succesfully created!",setTimeout(()=>{location.reload()},2e3)}catch(c){console.error("Error creating listing:",c)}})}const F=document.querySelector("[data-open-modal]"),S=document.querySelector("[data-close-modal]"),i=document.querySelector("[data-modal]");gsap.set(i,{y:-50,opacity:1});F.addEventListener("click",()=>{document.body.classList.add("modal-open"),i.classList.add("modal-visible"),i.showModal(),gsap.to(i,{duration:.8,ease:"elastic.out(1.2,0.5)",y:0,opacity:1})});S.addEventListener("click",()=>{i.classList.remove("modal-visible"),document.body.classList.remove("modal-open"),i.close(),gsap.to(i,{duration:.8,ease:"elastic.out(1.2,0.5)",y:-50})});const v=document.querySelector("dialog");v&&v.addEventListener("click",t=>{t.target===v&&(i.classList.remove("modal-visible"),document.body.classList.remove("modal-open"),i.close())});document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector(".create-form"),e=document.querySelector(".upload-images-form");t.addEventListener("submit",function(o){o.preventDefault()}),e.addEventListener("submit",function(o){o.preventDefault();const s=document.querySelector("#url1").value.trim(),l=document.querySelector("#url2").value.trim(),d=document.querySelector("#url3").value.trim();if(s!==""&&n(s,1),l!==""&&n(l,2),d!==""&&n(d,3),s!==""||l!==""||d!==""){const r=e.querySelector("[type='submit']");r.textContent="Success",document.body.classList.remove("modal-open"),setTimeout(()=>{S.click(),r.textContent="Upload"},1200)}});function n(o,s){const l=document.createElement("img");l.src=o;const d=`#url${s}`,p=document.querySelector(d),r=document.querySelector(`.thumbnail-box:nth-child(${s})`);r&&(r.innerHTML="",r.appendChild(l),p.value="");const m=document.createElement("div");m.classList.add("remove-thumbnail"),m.textContent=" ðŸ—™ ",m.addEventListener("click",f=>{const c=f.target.closest(".thumbnail-box"),E=`#url${s}`,g=document.querySelector(E);c&&g&&(c.innerHTML="",g.value="")}),r.append(l,m)}const a=document.getElementById("title"),u=document.getElementById("tags");a.addEventListener("keydown",function(o){o.key==="Enter"&&o.preventDefault()}),u.addEventListener("keydown",function(o){o.key==="Enter"&&o.preventDefault()})});B();
