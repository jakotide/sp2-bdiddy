import"./main-5962511a.js";import"./hamburger-5bbfc2df.js";import{A as C}from"./constants-88326297.js";import{g as q}from"./headers-246ce9a4.js";async function x(t){try{const e=await fetch(`${C}/listings`,{method:"POST",headers:q(),body:JSON.stringify(t)});if(e.ok)return await e.json();throw new Error}catch(e){console.error("Error:",e)}}const k=document.querySelector(".create-form"),L=document.getElementById("tags"),b=document.querySelector(".tags-container"),E=[{background:"#23A79A",font:"#000000"},{background:"#FF91E7",font:"#000000"},{background:"#91A8EC",font:"#000000"}];let f=0;const T=()=>{const t=E[f];return f=(f+1)%E.length,t},w=t=>{t.target.classList.contains("tag-close")&&t.target.parentElement.remove()},A=(t,e)=>{const n=document.createElement("span");n.classList.add("tag"),n.style.backgroundColor=e.background,n.style.color=e.font;const a=document.createElement("span");a.classList.add("tag-text"),a.textContent=t;const u=document.createElement("span");return u.classList.add("tag-close"),u.textContent=" ðŸ—™ ",n.appendChild(a),n.appendChild(u),n},D=t=>{if(t.keyCode===13){t.preventDefault();const e=t.target.value,n=T(),a=A(e,n);b.appendChild(a),L.value=""}};k.addEventListener("submit",t=>{t.preventDefault()});L.addEventListener("keyup",D);window.onload=()=>{b.addEventListener("click",w)};async function I(){const t=document.querySelector(".create-form");t&&t.addEventListener("submit",async e=>{e.preventDefault();const n=e.target,a=new FormData(n),u=a.get("date"),o=a.get("time"),i=`${u}T${o}`;document.getElementById("tags");const s=document.querySelector(".tags-container"),r=document.querySelector(".create-btn"),m=document.querySelector(".create-h1"),d={title:a.get("title"),description:a.get("description"),endsAt:i},g=Array.from(s.children).filter(c=>c.classList.contains("tag")).map(c=>c.querySelector(".tag-text").textContent.trim()).filter(c=>c!=="");g.length>0&&(d.tags=g);const p=document.querySelector(".upload-images-form");if(p){const c=new FormData(p),v=Array.from(c.getAll("media")).filter(S=>S.trim()!=="");v.length>0&&(d.media=v)}try{r.innerHTML='<span class="loader"></span>',await x(d),r.textContent="Success!",m.textContent="Listing succesfully created!",setTimeout(()=>{location.reload()},2e3)}catch(c){console.error("Error creating listing:",c)}})}const B=document.querySelector("[data-open-modal]"),h=document.querySelector("[data-close-modal]"),l=document.querySelector("[data-modal]");gsap.set(l,{y:-50,opacity:1});B.addEventListener("click",()=>{document.body.classList.add("modal-open"),l.classList.add("modal-visible"),l.showModal(),gsap.to(l,{duration:.8,ease:"elastic.out(1.2,0.5)",y:0,opacity:1})});h.addEventListener("click",()=>{l.classList.remove("modal-visible"),document.body.classList.remove("modal-open"),l.close(),gsap.to(l,{duration:.8,ease:"elastic.out(1.2,0.5)",y:-50})});const y=document.querySelector("dialog");y&&y.addEventListener("click",t=>{t.target===y&&(l.classList.remove("modal-visible"),document.body.classList.remove("modal-open"),l.close())});document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector(".create-form"),e=document.querySelector(".upload-images-form");t.addEventListener("submit",function(o){o.preventDefault()}),e.addEventListener("submit",function(o){o.preventDefault();const i=document.querySelector("#url1").value.trim(),s=document.querySelector("#url2").value.trim(),r=document.querySelector("#url3").value.trim();if(i!==""&&n(i,1),s!==""&&n(s,2),r!==""&&n(r,3),i!==""||s!==""||r!==""){const d=e.querySelector("[type='submit']");d.textContent="Success",document.body.classList.remove("modal-open"),setTimeout(()=>{h.click(),d.textContent="Upload"},1200)}});function n(o,i){const s=document.createElement("img");s.src=o;const r=document.querySelector(`.thumbnail-box:nth-child(${i})`);r&&(r.innerHTML="",r.appendChild(s));const m=document.createElement("div");m.classList.add("remove-thumbnail"),m.textContent=" ðŸ—™ ",m.addEventListener("click",d=>{const g=d.target.closest(".thumbnail-box"),p=`#url${i}`,c=document.querySelector(p);g&&c&&(g.innerHTML="",c.value="")}),r.append(s,m)}const a=document.getElementById("title"),u=document.getElementById("tags");a.addEventListener("keydown",function(o){o.key==="Enter"&&o.preventDefault()}),u.addEventListener("keydown",function(o){o.key==="Enter"&&o.preventDefault()})});I();
