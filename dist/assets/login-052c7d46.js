import"./main-fbfed023.js";import{A as c,a,b as l}from"./constants-88326297.js";const g=document.querySelectorAll(".login-toggle"),m=document.querySelector(".main-login");g.forEach(r=>{r.addEventListener("click",()=>{m.classList.toggle("active")})});const s=document.getElementById("signUpBtn"),d=document.querySelector(".main-login");async function u(r){const o=c+a;try{const e=await fetch(o,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(r)});if(e.ok){s.innerHTML='<span class="loader"></span>';const t=await e.json();console.log("Registration successful:",t),s.textContent="Success!",setTimeout(()=>{d.classList.toggle("active")},2e3)}else{const t=await e.json();console.error("Registration failed:",t),alert("Something went wrong with the registration. Try another username.")}}catch(e){console.error("An error occurred during registration:",e)}}function f(){document.querySelector(".register-form").addEventListener("submit",o=>{o.preventDefault();const e=o.target,t=new FormData(e),n=Object.fromEntries(t.entries());u(n)})}function i(r,o){localStorage.setItem(r,JSON.stringify(o))}const y=document.querySelector(".error-message");async function p(r){const o=c+l;try{const e=await fetch(o,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(r)});if(e.ok){const{accessToken:t,...n}=await e.json();i("token",t),i("User",n),window.location.href="/sp2-bdiddy/index"}else{const t=await e.json();console.error("Login failed:",t),y.style.display="Block"}}catch(e){console.error("An error occurred during login:",e)}}function S(){document.querySelector(".login-form").addEventListener("submit",o=>{o.preventDefault();const e=o.target,t=new FormData(e),n=Object.fromEntries(t.entries());p(n)})}f();S();
