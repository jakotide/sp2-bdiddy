import"./main-18ed1cf8.js";import{a as P}from"./hamburger-5bbfc2df.js";import{g as B}from"./read-eeac6ab1.js";import"./constants-88326297.js";import"./headers-246ce9a4.js";const I=document.querySelector(".desertBtn"),j=document.querySelector(".mountainBtn"),z=document.querySelector(".coralBtn"),G=document.querySelector(".mainBtn"),V=document.querySelector(".flowerBtn"),$=document.querySelector(".body"),Q=document.querySelector(".nav"),U=document.querySelector(".hero__grid"),p=document.querySelectorAll(".card__container"),W=document.querySelector(".marquee"),C=document.querySelector(".theme__container"),J=document.querySelector(".hideThemesBtn"),h=document.querySelector(".showThemesBtn");function S(e,t){e.forEach(n=>{n.setAttribute("data-theme",t)})}function g(e,t){const n=document.querySelectorAll(".card");S(n,t),S([e],t)}function L(e){S([$,Q,U,W,C,h],e)}function _(e){e.matches&&(C.classList.toggle("active"),h.classList.toggle("active"))}let M=window.matchMedia("(max-width: 30em)");_(M);M.addEventListener("change",function(e){_(e.target)});I.addEventListener("click",()=>{p.forEach(e=>g(e,"desert-fruit")),L("desert-fruit")});j.addEventListener("click",()=>{p.forEach(e=>g(e,"neon-mountain")),L("neon-mountain")});z.addEventListener("click",()=>{p.forEach(e=>g(e,"funky-corals")),L("funky-corals")});G.addEventListener("click",()=>{p.forEach(e=>{g(e,"main-theme"),L("main-theme")})});V.addEventListener("click",()=>{p.forEach(e=>{g(e,"flower-power"),L("flower-power")})});J.addEventListener("click",()=>{C.classList.toggle("active"),h.classList.toggle("active")});h.addEventListener("click",()=>{C.classList.toggle("active"),h.classList.toggle("active")});const K=document.querySelector(".filter__menu-btn"),A=document.querySelector(".filter__menu"),T=document.querySelectorAll(".filter__btn"),w=document.querySelector("#overlay");document.querySelectorAll(".filter-mobile-btn");let E=T[0];T.forEach(e=>{e.addEventListener("click",()=>{e!==E&&(E&&E.classList.remove("active"),e.classList.add("active"),E=e)})});K.addEventListener("click",()=>{A.classList.toggle("active"),w.style.display="block",document.body.classList.add("modal-open")});w.onclick=()=>{A.classList.toggle("active"),w.style.display="none",document.body.classList.remove("modal-open")};document.body.addEventListener("click",e=>{e.target.classList.contains("filter-mobile-btn")&&(w.style.display="none",document.body.classList.remove("modal-open"))});gsap.to(".marquee__part",{xPercent:100,repeat:-1,duration:10,ease:"linear"}).totalProgress(.5);gsap.set(".marquee__inner",{xPercent:-50});function f(e){const t=document.createElement("a");t.classList.add("card","shadow"),t.href="/sp2-bdiddy/listing/?id="+e.id;const n=document.createElement("img");if(n.classList.add("card__img"),!e.media||e.media===" ")n.src="/assets/img/noimage.jpg";else{const s=new Image;s.src=e.media,s.onload=function(){n.src=e.media,n.alt="Image of "+e.title},s.onerror=function(){n.src="/assets/img/noimage.jpg",n.alt="No image available"}}const r=document.createElement("div");r.classList.add("card__details");const c=document.createElement("div");e.seller&&e.seller.name?c.textContent=`${e.seller.name} listed:`:c.textContent="User listed:";const l=document.createElement("h3");l.textContent=e.title;function i(s){return s.reduce((y,v)=>v.amount>y.amount?v:y,s[0])}const a=i(e.bids);let o;if(window.innerWidth<450)if(a){const s=document.createElement("div");s.style.overflow="hidden",s.textContent="Current leader: "+a.bidderName,o=s}else{const s=document.createElement("div");s.textContent="",o=s}else{const s=document.createElement("div");s.textContent="",o=s}const d=document.createElement("div");d.classList.add("card__price","flex-row");const m=document.createElement("div");if(e._count.bids>0){const s=e.bids.sort((v,N)=>(N.amount||0)-(v.amount||0)),y=s[0]&&s[0].amount;s.length===0||y===void 0?m.innerHTML="No bids":m.innerHTML=y+"$"}else m.innerHTML="No bids";const k=document.createElement("i");return k.classList.add("fa-solid","fa-arrow-right"),r.append(c,l,o),d.append(m,k),t.append(n,r,d),t}function O(e,t,n){const c=e.filter(o=>{const d=o.title.toLowerCase();return!d.includes("test")&&!d.includes("testing")&&!d.includes("tester")&&!d.includes("title")}).sort((o,d)=>new Date(d.created)-new Date(o.created)),l=c.slice(0,8);let i=c.slice(8,40);const a=document.querySelector(".showMoreBtn");a.addEventListener("click",()=>{a.innerHTML='<span class="loader"></span>',setTimeout(()=>{i=c.slice(41,100),n.append(...i.map(f)),a.style.display="none"},2e3)}),t.append(...l.map(f)),n.append(...i.map(f))}async function X(){const e=await B(),t=document.querySelector(".search"),n=document.querySelector("#search-input"),r=document.querySelector("#searchResults");return t&&t.addEventListener("submit",async c=>{c.preventDefault();const l=n.value.trim().toLowerCase(),i=e.filter(a=>{var q;const o=(a.title||"").toLowerCase(),d=(a.description||"").toLowerCase(),m=(((q=a.seller)==null?void 0:q.name)||"").toLowerCase();return o.includes(l)||d.includes(l)||m.includes(l)});r.innerHTML="",x(i,r)}),[]}function x(e,t){if(t.innerHTML="",!e||!Array.isArray(e)||e.length===0){const r=document.querySelector("#searchContainer"),c=document.createElement("div");c.style.textAlign="Center",c.style.fontFamily="MabryPro-Regular",c.textContent="No matching results found.",r.style.display="Block",t.appendChild(c);return}const n=e.map(f);t.append(...n)}async function R(){const e=await B(),t=document.querySelectorAll(".electronics"),n=document.querySelectorAll(".fashion"),r=document.querySelectorAll(".vehicles"),c=document.querySelectorAll(".retro"),l=document.querySelectorAll(".food"),i=document.querySelectorAll(".art"),a=document.querySelectorAll(".housing");t.forEach(o=>{o.addEventListener("click",()=>u("Electronics",e))}),n.forEach(o=>{o.addEventListener("click",()=>u("Fashion",e))}),r.forEach(o=>{o.addEventListener("click",()=>u("Vehicles",e))}),l.forEach(o=>{o.addEventListener("click",()=>u("Food",e))}),c.forEach(o=>{o.addEventListener("click",()=>u("Retro",e))}),i.forEach(o=>{o.addEventListener("click",()=>u("Art",e))}),a.forEach(o=>{o.addEventListener("click",()=>u("Housing",e))})}async function u(e,t){const n=await Y(e,t),r=document.querySelector("#searchResults");H(n,r)}async function Y(e,t){const n=e.toLowerCase(),c={electronics:["electronics","iphone","computer","data","lamp"],fashion:["clothing","jacket","hat","gloves","tux","dress"],vehicles:["car","volvo","nissan","toyota","ferrari","boat","plane","motor","offroad"],retro:["vintage","retro","vinyl","old"],food:["cake","muffin","banana","apple","food","pizza","burger","candy","pear"],art:["painting","sculpture","art"],housing:["house","apartment","castle","tower"]}[n]||[];return t.filter(i=>{const a=i.title.toLowerCase();return c.some(d=>a.includes(d))})}function H(e,t){const n=document.querySelector("#searchContainer"),r=document.querySelectorAll(".all");if(t.innerHTML="",r.forEach(l=>{l.addEventListener("click",()=>{n.style.display="none"})}),!e||e.length===0){const l=document.querySelector("#searchContainer"),i=document.createElement("div");i.style.textAlign="Center",i.style.fontFamily="MabryPro-Regular",i.textContent="No matching results found.",l.style.display="Block",t.appendChild(i);return}const c=document.createDocumentFragment();e.forEach(l=>{const i=f(l);c.appendChild(i)}),n.style.display="Block",t.appendChild(c)}R();const F=document.querySelector("#searchResults");async function Z(){const e=await R();e&&H(e,F)}Z();async function D(){const e=await X();document.querySelector("#searchButton").addEventListener("click",()=>{x(e,F)})}D();async function ee(){const e=document.querySelector("#newContainer"),t=document.querySelector("#allContainer"),n=document.querySelector(".loader");n.style.display="block";try{const r=await B();O(r,e,t),n.style.display="none"}catch(r){console.error("Error fetching listings:",r),n.style.display="none"}}ee();const b=document.querySelector("#createBtn");P(()=>{b.style.display="block"},()=>{b.style.display="none"});
