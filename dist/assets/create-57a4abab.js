import"./main-18ed1cf8.js";import"./hamburger-5bbfc2df.js";import{A as C}from"./constants-88326297.js";import{g as S}from"./headers-246ce9a4.js";async function q(t){try{const e=await fetch(`${C}/listings`,{method:"POST",headers:S(),body:JSON.stringify(t)});if(e.ok)return await e.json();throw new Error}catch(e){console.error("Error:",e)}}const x=document.querySelector(".create-form"),h=document.getElementById("tags"),v=document.querySelector(".tags-container"),E=[{background:"#23A79A",font:"#000000"},{background:"#FF91E7",font:"#000000"},{background:"#91A8EC",font:"#000000"}];let f=0;const k=()=>{const t=E[f];return f=(f+1)%E.length,t},T=t=>{t.target.classList.contains("tag-close")&&t.target.parentElement.remove()},w=(t,e)=>{const n=document.createElement("span");n.classList.add("tag"),n.style.backgroundColor=e.background,n.style.color=e.font;const r=document.createElement("span");r.classList.add("tag-text"),r.textContent=t;const d=document.createElement("span");return d.classList.add("tag-close"),d.textContent=" ðŸ—™ ",n.appendChild(r),n.appendChild(d),n},A=t=>{if(t.keyCode===13){t.preventDefault();const e=t.target.value,n=k(),r=w(e,n);v.appendChild(r),h.value=""}};x.addEventListener("submit",t=>{t.preventDefault()});h.addEventListener("keyup",A);window.onload=()=>{v.addEventListener("click",T)};async function D(){const t=document.querySelector(".create-form");t&&t.addEventListener("submit",async e=>{e.preventDefault();const n=e.target,r=new FormData(n),d=r.get("date"),o=r.get("time"),l=`${d}T${o}`;document.getElementById("tags");const s=document.querySelector(".tags-container"),c=document.querySelector(".create-btn"),u=document.querySelector(".create-h1"),i={title:r.get("title"),description:r.get("description"),endsAt:l},m=Array.from(s.children).filter(a=>a.classList.contains("tag")).map(a=>a.querySelector(".tag-text").textContent.trim()).filter(a=>a!=="");m.length>0&&(i.tags=m);const p=document.querySelector(".upload-images-form");if(p){const a=new FormData(p),y=Array.from(a.getAll("media")).filter(b=>b.trim()!=="");y.length>0&&(i.media=y)}try{c.innerHTML='<span class="loader"></span>',await q(i),c.textContent="Success!",u.textContent="Listing succesfully created!",setTimeout(()=>{location.reload()},2e3)}catch(a){console.error("Error creating listing:",a)}})}const I=document.querySelector("[data-open-modal]"),L=document.querySelector("[data-close-modal]"),g=document.querySelector("[data-modal]");gsap.set(g,{y:-50,opacity:1});I.addEventListener("click",()=>{g.showModal(),gsap.to(g,{duration:.8,ease:"elastic.out(1.2,0.5)",y:0,opacity:1})});L.addEventListener("click",()=>{g.close(),gsap.to(g,{duration:.8,ease:"elastic.out(1.2,0.5)",y:-50})});document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector(".create-form"),e=document.querySelector(".upload-images-form");t.addEventListener("submit",function(o){o.preventDefault()}),e.addEventListener("submit",function(o){o.preventDefault();const l=document.querySelector("#url1").value.trim(),s=document.querySelector("#url2").value.trim(),c=document.querySelector("#url3").value.trim();if(l!==""&&n(l,1),s!==""&&n(s,2),c!==""&&n(c,3),l!==""||s!==""||c!==""){const i=e.querySelector("[type='submit']");i.textContent="Success",setTimeout(()=>{L.click(),i.textContent="Upload"},1200)}});function n(o,l){const s=document.createElement("img");s.src=o;const c=document.querySelector(`.thumbnail-box:nth-child(${l})`);c&&(c.innerHTML="",c.appendChild(s));const u=document.createElement("div");u.classList.add("remove-thumbnail"),u.textContent=" ðŸ—™ ",u.addEventListener("click",i=>{const m=i.target.closest(".thumbnail-box"),p=`#url${l}`,a=document.querySelector(p);m&&a&&(m.innerHTML="",a.value="")}),c.append(s,u)}const r=document.getElementById("title"),d=document.getElementById("tags");r.addEventListener("keydown",function(o){o.key==="Enter"&&o.preventDefault()}),d.addEventListener("keydown",function(o){o.key==="Enter"&&o.preventDefault()})});D();
